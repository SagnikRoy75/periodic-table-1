function httpGet(a){var b=null;if(window.XMLHttpRequest)return b=new XMLHttpRequest,b.open("GET",a,!1),b.send(),b;if(window.XDomainRequest)return b=new XDomainRequest,b.open("get",a),b.send(),b;if(window.DOMParser){var c=new DOMParser,d=c.parseFromString(b.responseText,"text/xml");return d}var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(b.responseText),e}function element(a){var b=this;if(this.id=a,this.container=document.getElementById(this.id),this.isOdd=function(a){return a%2==1?!0:!1},this.draw=function(a,b){for(var c=a,d=Math.round(b)-a,e=c+Math.round(d),f=Math.ceil(Math.sqrt(e)),g=Math.ceil(Math.sqrt(e)),h=70/Math.round(Math.sqrt(e)),i=2*h,j=1;f+1>j;j++)for(var k=1;g+1>k;k++)this.isOdd(k)&&c>0?(this.ctx.fillStyle="#ff0000",c--):d>0?(this.ctx.fillStyle="#0000ff",d--):d+c==0&&(this.ctx.fillStyle="transparent"),this.ctx.beginPath(),this.ctx.arc(k*i,j*i,h,0,2*Math.PI,!1),this.ctx.fill()},this.close=function(){this.container.classList.remove("element-expanded")},this.bindExtraTab=function(){var a="tabs-container-inner-"+this.jsonElement.AtomicNumber;this.extraTabs=new simpleTabs(a)},this.container.classList.add("element-expanded"),!this.container.classList.contains("element-loaded")){this.jsonUrl="http://periodic-table.local/element/"+this.id+".json",this.jsonData=httpGet(this.jsonUrl),this.jsonParsed=JSON.parse(this.jsonData.response),this.jsonElement=this.jsonParsed.element,this.furtherInformation=this.container.getElementsByClassName("further-information").item(0);for(var c="",d=this.jsonElement.PhysicalProperties.length,e=0;d>e;e++)c+="<p><strong>"+this.jsonElement.PhysicalProperties[e].Property[0]+"</strong> "+this.jsonElement.PhysicalProperties[e].Property[1]+"</p>";if(this.furtherInformation.innerHTML='<div class="tabs-container" id="'+this.jsonElement.AtomicNumber+'"> <div class="tab-container"> 	<span class="arrow next" id="nextTab-'+this.jsonElement.AtomicNumber+'">next</span> 	<span class="heading">'+this.jsonElement.ElementName+'</span> 	<div class="content">		<div class="information">			<p>				<strong>Atomic number:</strong>				'+this.jsonElement.AtomicNumber+"			</p>			<p>				<strong>Atomic Weight</strong>				"+this.jsonElement.AtomicWeight+"			</p>			<p>				<strong>Protons</strong>				"+this.jsonElement.AtomicNumber+"			</p>			<p>				<strong>Neutrons</strong>				"+(Math.ceil(this.jsonElement.AtomicWeight)-this.jsonElement.AtomicNumber)+"			</p>			<p>				<strong>Electrons</strong>				"+this.jsonElement.AtomicNumber+"			</p>"+c+' 		</div>	</div>  <a href="'+this.jsonElement.MoreInfoLink+'" class="explore-link" target="_blank">More Information</a>	</div> 	<div class="tab-container"> 		<span class="arrow prev" id="prevTab-'+this.jsonElement.AtomicNumber+'">previous</span>		<div class="tabs-container-inner content" id="tabs-container-inner-'+this.jsonElement.AtomicNumber+'">			<ul class="tabs-navigation">				<li><a href="#'+this.jsonElement.AtomicNumber+'-tab-1" class="tab-link tab-1">Description</a></li>				<li><a href="#'+this.jsonElement.AtomicNumber+'-tab-2" class="tab-link tab-2">Visualise</a></li>			</ul>			<ul class="tabs-content">				<li class="tab-content tab-1 tab-visible" id="'+this.jsonElement.AtomicNumber+'-tab-1">'+this.jsonElement.BriefDescription+'</li>				<li class="tab-content tab-2 tab-visible" id="'+this.jsonElement.AtomicNumber+'-tab-2"><canvas id="visualise-'+this.jsonElement.AtomicNumber+'" width="260" height="210"></canvas><p>Red = Proton | Blue = Neutron</li>			</ul>		</div>	</div>	</div>',this.canvas=document.getElementById("visualise-"+this.jsonElement.AtomicNumber),this.canvas.getContext){this.ctx=this.canvas.getContext("2d");{this.canvas.clientWidth,this.canvas.clientHeight}this.draw(this.jsonElement.AtomicNumber,this.jsonElement.AtomicWeight)}else console.log("Your browser doesn't support the HTML canvas feature :( sorry");this.tabContainer=this.container.getElementsByClassName("tabs-container")[0],document.getElementById("nextTab-"+this.jsonElement.AtomicNumber).addEventListener("click",function(a){a.stopPropagation(),b.bindExtraTab(),b.tabContainer.classList.add("tab-expanded"),b.tabContainer.setAttribute("style","margin-left: -100%")},!1),screen.width>400&&this.bindExtraTab(),document.getElementById("prevTab-"+this.jsonElement.AtomicNumber).addEventListener("click",function(a){a.stopPropagation(),b.tabContainer.classList.remove("tab-expanded"),b.tabContainer.setAttribute("style","margin-left: 0")},!1)}}function simpleTabs(a){var b=this;this.container=document.getElementById(a),this.tabLinks=this.container.getElementsByClassName("tab-link"),this.tabContents=this.container.getElementsByClassName("tab-content"),this.numTabs=this.tabLinks.length,this.showTab=function(a){var b=a.hash,c=b.substr(1,b.length),d=document.getElementById(c);this.hideTabs(),a.classList.add("tab-selected"),d.classList.add("tab-visible")},this.hideTabs=function(){for(var a=0;a<this.numTabs;a++)this.tabLinks[a].classList.remove("tab-selected"),this.tabContents[a].classList.remove("tab-visible")};for(var c=0;c<this.numTabs;c++)this.tabLinks[c].addEventListener("click",function(a){a.stopPropagation(),a.preventDefault(),b.showTab(this)}),this.hideTabs(),this.showTab(this.tabLinks[0])}var elements=document.getElementsByClassName("element"),l=elements.length,i=0,openedElements=[];for(i;l>i;i++)elements[i].addEventListener("click",function(a){a.stopPropagation();var b=this.id,c=this.id-1;elements[c].classList.contains("element-expanded")||(openedElements.push(new element(b)),this.classList.add("element-loaded","element-focus"));for(var d=document.getElementsByClassName("element-focus");d.length;)d[0].classList.remove("element-focus");elements[c].classList.add("element-focus")},!1);document.body.addEventListener("click",function(){try{var a=openedElements[openedElements.length-1];console.log(a),a.close(),openedElements.pop()}catch(b){console.log("No items expanded!")}},!1);var elementsKey=document.getElementsByClassName("key-element"),l=elementsKey.length,i=0;for(i;l>i;i++)elementsKey[i].addEventListener("mouseover",function(){var a=document.getElementsByClassName(this.id),b=a.length;console.log(b);var c=0;for(c;b>c;c++)a[c].classList.add("element-highlighted")},!1),elementsKey[i].addEventListener("mouseout",function(){var a=document.getElementsByClassName(this.id),b=a.length,c=0;for(c;b>c;c++)a[c].classList.remove("element-highlighted")},!1);