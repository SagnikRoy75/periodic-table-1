function httpGet(a){var b=null;if(window.XMLHttpRequest)return b=new XMLHttpRequest,b.open("GET",a,!1),b.send(),b;if(window.XDomainRequest)return b=new XDomainRequest,b.open("get",a),b.send(),b;if(window.DOMParser){var c=new DOMParser,d=c.parseFromString(b.responseText,"text/xml");return d}var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(b.responseText),e}function simpleTabs(a){var b=this;this.container=document.getElementById(a),this.tabLinks=this.container.getElementsByClassName("tab-link"),this.tabContents=this.container.getElementsByClassName("tab-content"),this.numTabs=this.tabLinks.length,this.showTab=function(a){var b=a.hash,c=b.substr(1,b.length),d=document.getElementById(c);this.hideTabs(),a.classList.add("tab-selected"),d.classList.add("tab-visible")},this.hideTabs=function(){for(var a=0;a<this.numTabs;a++)this.tabLinks[a].classList.remove("tab-selected"),this.tabContents[a].classList.remove("tab-visible")};for(var c=0;c<this.numTabs;c++)this.tabLinks[c].addEventListener("click",function(a){a.stopPropagation(),a.preventDefault(),b.showTab(this)}),this.hideTabs(),this.showTab(this.tabLinks[0])}function element(a){var b=this;if(this.id=a,this.container=document.getElementById(this.id),this.isOdd=function(a){return a%2==1?!0:!1},this.draw=function(a,b){for(var c=a,d=Math.round(b)-a,e=c+Math.round(d),f=Math.ceil(Math.sqrt(e)),g=Math.ceil(Math.sqrt(e)),h=70/Math.round(Math.sqrt(e)),i=2*h,j=1;f+1>j;j++)for(var k=1;g+1>k;k++)this.isOdd(k)&&c>0?(this.ctx.fillStyle="#ff0000",c--):d>0?(this.ctx.fillStyle="#0000ff",d--):d+c==0&&(this.ctx.fillStyle="transparent"),this.ctx.beginPath(),this.ctx.arc(k*i,j*i,h,0,2*Math.PI,!1),this.ctx.fill()},this.close=function(){this.container.classList.remove("el-expanded","el-focus")},this.bindExtraTab=function(){var a="tabs-container-inner-"+this.jsonElement.AtomicNumber;this.extraTabs=new simpleTabs(a)},!this.container.classList.contains("el-loaded")){this.jsonUrl="http://periodic-table.local/element/"+this.id+".json",this.jsonData=httpGet(this.jsonUrl),this.jsonParsed=JSON.parse(this.jsonData.response),this.jsonElement=this.jsonParsed.element,this.furtherInformation=document.createElement("div"),this.furtherInformation.className="further-information",this.container.appendChild(this.furtherInformation);for(var c="",d=this.jsonElement.PhysicalProperties.length,e=0;d>e;e++)c+="<p><strong>"+this.jsonElement.PhysicalProperties[e].Property[0]+"</strong> "+this.jsonElement.PhysicalProperties[e].Property[1]+' <abbr title="'+this.jsonElement.PhysicalProperties[e].PropertyType[0]+'">'+this.jsonElement.PhysicalProperties[e].PropertyType[1]+"</abbr></p>";if(this.furtherInformation.innerHTML='<div class="tabs-container" id="'+this.jsonElement.AtomicNumber+'"> <div class="tab-container"> 	<span class="arrow next" id="nextTab-'+this.jsonElement.AtomicNumber+'">next</span> 	<span class="heading">'+this.jsonElement.ElementName+'</span> 	<div class="content">		<div class="information">			<p>				<strong>Atomic number:</strong>				'+this.jsonElement.AtomicNumber+"			</p>			<p>				<strong>Atomic Weight</strong>				"+this.jsonElement.AtomicWeight+"			</p>			<p>				<strong>Protons</strong>				"+this.jsonElement.AtomicNumber+"			</p>			<p>				<strong>Neutrons</strong>				"+(Math.round(this.jsonElement.AtomicWeight)-this.jsonElement.AtomicNumber)+"			</p>			<p>				<strong>Electrons</strong>				"+this.jsonElement.AtomicNumber+"			</p>"+c+' 		</div>	</div>  <a href="'+this.jsonElement.MoreInfoLink+'" class="explore-link" target="_blank">More Information</a>	</div> 	<div class="tab-container"> 		<span class="arrow prev" id="prevTab-'+this.jsonElement.AtomicNumber+'">previous</span>		<div class="tabs-container-inner content" id="tabs-container-inner-'+this.jsonElement.AtomicNumber+'">			<ul class="tabs-navigation">				<li><a href="#'+this.jsonElement.AtomicNumber+'-tab-1" class="tab-link tab-1">Description</a></li>				<li><a href="#'+this.jsonElement.AtomicNumber+'-tab-2" class="tab-link tab-2">Visualise</a></li>			</ul>			<ul class="tabs-content">				<li class="tab-content tab-1 tab-visible" id="'+this.jsonElement.AtomicNumber+'-tab-1">'+this.jsonElement.BriefDescription+'</li>				<li class="tab-content tab-2 tab-visible" id="'+this.jsonElement.AtomicNumber+'-tab-2"><canvas id="visualise-'+this.jsonElement.AtomicNumber+'" width="260" height="210"></canvas><p>Red = Proton | Blue = Neutron</li>			</ul>		</div>	</div>	</div>',this.canvas=document.getElementById("visualise-"+this.jsonElement.AtomicNumber),this.canvas.getContext){this.ctx=this.canvas.getContext("2d");{this.canvas.clientWidth,this.canvas.clientHeight}this.draw(this.jsonElement.AtomicNumber,this.jsonElement.AtomicWeight)}else console.log("Your browser doesn't support the HTML canvas feature :( sorry");this.tabContainer=this.container.getElementsByClassName("tabs-container")[0],document.getElementById("nextTab-"+this.jsonElement.AtomicNumber).addEventListener("click",function(a){a.stopPropagation(),b.bindExtraTab(),b.tabContainer.classList.add("tab-expanded"),b.tabContainer.setAttribute("style","margin-left: -100%")},!1),screen.width>400&&this.bindExtraTab(),document.getElementById("prevTab-"+this.jsonElement.AtomicNumber).addEventListener("click",function(a){a.stopPropagation(),b.tabContainer.classList.remove("tab-expanded"),b.tabContainer.setAttribute("style","margin-left: 0")},!1)}this.container.classList.add("el-expanded")}!function(a,b,c){"use strict";var d=function(d,e){var f=!!b.getComputedStyle;f||(b.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"===b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this});var g,h,i,j,k,l,m=function(a,b,c,d){if("addEventListener"in a)try{a.addEventListener(b,c,d)}catch(e){if("object"!=typeof c||!c.handleEvent)throw e;a.addEventListener(b,function(a){c.handleEvent.call(c,a)},d)}else"attachEvent"in a&&("object"==typeof c&&c.handleEvent?a.attachEvent("on"+b,function(){c.handleEvent.call(c)}):a.attachEvent("on"+b,c))},n=function(a,b,c,d){if("removeEventListener"in a)try{a.removeEventListener(b,c,d)}catch(e){if("object"!=typeof c||!c.handleEvent)throw e;a.removeEventListener(b,function(a){c.handleEvent.call(c,a)},d)}else"detachEvent"in a&&("object"==typeof c&&c.handleEvent?a.detachEvent("on"+b,function(){c.handleEvent.call(c)}):a.detachEvent("on"+b,c))},o=function(a){if(a.children.length<1)throw new Error("The Nav container has no containing elements");for(var b=[],c=0;c<a.children.length;c++)1===a.children[c].nodeType&&b.push(a.children[c]);return b},p=function(a,b){for(var c in b)a.setAttribute(c,b[c])},q=function(a,b){0!==a.className.indexOf(b)&&(a.className+=" "+b,a.className=a.className.replace(/(^\s*)|(\s*$)/g,""))},r=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/(^\s*)|(\s*$)/g,"")},s=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},t=a.createElement("style"),u=a.documentElement,v=function(b,c){var d;this.options={animate:!0,transition:284,label:"Menu",insert:"before",customToggle:"",closeOnNavClick:!1,openPos:"relative",navClass:"nav-collapse",navActiveClass:"js-nav-active",jsClass:"js",init:function(){},open:function(){},close:function(){}};for(d in c)this.options[d]=c[d];if(q(u,this.options.jsClass),this.wrapperEl=b.replace("#",""),a.getElementById(this.wrapperEl))this.wrapper=a.getElementById(this.wrapperEl);else{if(!a.querySelector(this.wrapperEl))throw new Error("The nav element you are trying to select doesn't exist");this.wrapper=a.querySelector(this.wrapperEl)}this.wrapper.inner=o(this.wrapper),h=this.options,g=this.wrapper,this._init(this)};return v.prototype={destroy:function(){this._removeStyles(),r(g,"closed"),r(g,"opened"),r(g,h.navClass),r(g,h.navClass+"-"+this.index),r(u,h.navActiveClass),g.removeAttribute("style"),g.removeAttribute("aria-hidden"),n(b,"resize",this,!1),n(a.body,"touchmove",this,!1),n(i,"touchstart",this,!1),n(i,"touchend",this,!1),n(i,"mouseup",this,!1),n(i,"keyup",this,!1),n(i,"click",this,!1),h.customToggle?i.removeAttribute("aria-hidden"):i.parentNode.removeChild(i)},toggle:function(){j===!0&&(l?this.close():this.open())},open:function(){l||(r(g,"closed"),q(g,"opened"),q(u,h.navActiveClass),q(i,"active"),g.style.position=h.openPos,p(g,{"aria-hidden":"false"}),l=!0,h.open())},close:function(){l&&(q(g,"closed"),r(g,"opened"),r(u,h.navActiveClass),r(i,"active"),p(g,{"aria-hidden":"true"}),h.animate?(j=!1,setTimeout(function(){g.style.position="absolute",j=!0},h.transition+10)):g.style.position="absolute",l=!1,h.close())},resize:function(){"none"!==b.getComputedStyle(i,null).getPropertyValue("display")?(k=!0,p(i,{"aria-hidden":"false"}),g.className.match(/(^|\s)closed(\s|$)/)&&(p(g,{"aria-hidden":"true"}),g.style.position="absolute"),this._createStyles(),this._calcHeight()):(k=!1,p(i,{"aria-hidden":"true"}),p(g,{"aria-hidden":"false"}),g.style.position=h.openPos,this._removeStyles())},handleEvent:function(a){var c=a||b.event;switch(c.type){case"touchstart":this._onTouchStart(c);break;case"touchmove":this._onTouchMove(c);break;case"touchend":case"mouseup":this._onTouchEnd(c);break;case"click":this._preventDefault(c);break;case"keyup":this._onKeyUp(c);break;case"resize":this.resize(c)}},_init:function(){this.index=c++,q(g,h.navClass),q(g,h.navClass+"-"+this.index),q(g,"closed"),j=!0,l=!1,this._closeOnNavClick(),this._createToggle(),this._transitions(),this.resize();var d=this;setTimeout(function(){d.resize()},20),m(b,"resize",this,!1),m(a.body,"touchmove",this,!1),m(i,"touchstart",this,!1),m(i,"touchend",this,!1),m(i,"mouseup",this,!1),m(i,"keyup",this,!1),m(i,"click",this,!1),h.init()},_createStyles:function(){t.parentNode||(t.type="text/css",a.getElementsByTagName("head")[0].appendChild(t))},_removeStyles:function(){t.parentNode&&t.parentNode.removeChild(t)},_createToggle:function(){if(h.customToggle){var b=h.customToggle.replace("#","");if(a.getElementById(b))i=a.getElementById(b);else{if(!a.querySelector(b))throw new Error("The custom nav toggle you are trying to select doesn't exist");i=a.querySelector(b)}}else{var c=a.createElement("a");c.innerHTML=h.label,p(c,{href:"#","class":"nav-toggle"}),"after"===h.insert?g.parentNode.insertBefore(c,g.nextSibling):g.parentNode.insertBefore(c,g),i=c}},_closeOnNavClick:function(){if(h.closeOnNavClick&&"querySelectorAll"in a){var b=g.querySelectorAll("a"),c=this;s(b,function(a){m(b[a],"click",function(){k&&c.toggle()},!1)})}},_preventDefault:function(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):a.returnValue=!1},_onTouchStart:function(b){b.stopPropagation(),"after"===h.insert&&q(a.body,"disable-pointer-events"),this.startX=b.touches[0].clientX,this.startY=b.touches[0].clientY,this.touchHasMoved=!1,n(i,"mouseup",this,!1)},_onTouchMove:function(a){(Math.abs(a.touches[0].clientX-this.startX)>10||Math.abs(a.touches[0].clientY-this.startY)>10)&&(this.touchHasMoved=!0)},_onTouchEnd:function(c){if(this._preventDefault(c),!this.touchHasMoved){if("touchend"===c.type)return this.toggle(),void("after"===h.insert&&setTimeout(function(){r(a.body,"disable-pointer-events")},h.transition+300));var d=c||b.event;3!==d.which&&2!==d.button&&this.toggle()}},_onKeyUp:function(a){var c=a||b.event;13===c.keyCode&&this.toggle()},_transitions:function(){if(h.animate){var a=g.style,b="max-height "+h.transition+"ms";a.WebkitTransition=b,a.MozTransition=b,a.OTransition=b,a.transition=b}},_calcHeight:function(){for(var a=0,b=0;b<g.inner.length;b++)a+=g.inner[b].offsetHeight;var c="."+h.jsClass+" ."+h.navClass+"-"+this.index+".opened{max-height:"+a+"px !important}";t.styleSheet?t.styleSheet.cssText=c:t.innerHTML=c,c=""}},new v(d,e)};b.responsiveNav=d}(document,window,0);var navigation=responsiveNav(".nav-collapse"),elements=document.getElementsByClassName("el"),closeAll=document.getElementById("element-close"),l=elements.length,i=0,openedElements=[],focusedElements;for(i;l>i;i++)elements[i].addEventListener("click",function(a){a.stopPropagation();var b=this.id,c=this.id-1;for(console.log(c),elements[c].classList.contains("el-expanded")||(openedElements.push(new element(b)),console.log(this.id),this.classList.add("el-focus","el-loaded"),console.log(this.classList)),focusedElements=document.getElementsByClassName("el-focus");focusedElements.length;)focusedElements[0].classList.remove("el-focus");console.log(elements[c]),this.classList.add("el-focus"),closeAll.classList.add("visible")},!1);console.log(openedElements),closeAll.addEventListener("click",function(a){a.preventDefault();for(var b=openedElements.length,c=b-1;c>=0;c--)openedElements[c].close(),openedElements.pop();closeAll.classList.remove("visible")},!1),document.body.addEventListener("click",function(){try{var a=openedElements[openedElements.length-1];a.close(),openedElements.pop(),0==openedElements.length&&closeAll.classList.remove("visible")}catch(b){}},!1);var elementsKey=document.getElementsByClassName("key-el"),l=elementsKey.length,i=0;for(i;l>i;i++)elementsKey[i].addEventListener("mouseover",function(){var a=document.getElementsByClassName(this.id),b=a.length,c=0;for(c;b>c;c++)a[c].classList.add("el-highlighted")},!1),elementsKey[i].addEventListener("mouseout",function(){var a=document.getElementsByClassName(this.id),b=a.length,c=0;for(c;b>c;c++)a[c].classList.remove("el-highlighted")},!1);